# Shell脚本开发规范指南

## 1. 基础规范
### 1.1 Shell选择
- 推荐使用Bash或POSIX兼容Shell（见原文33-51行）
- 避免使用特定于某些Shell的特性（如Zsh扩展语法）

### 1.2 文件规范
- 文件扩展名推荐：`.sh`（见81-100行）
- 禁用SUID/SGID权限（安全风险，见114-117行）

### 1.3 环境配置
- 标准输出(STDOUT)与错误输出(STDERR)分离（见118-139行）
- 环境变量命名建议大写（如MAX_RETRIES）

## 2. 编码规范
### 2.1 注释规范
```markdown
# 文件头注释模板（见144-157行）
# filename: backup.sh
# author: [你的名字]
# created: [日期]
# description: 数据备份脚本
```

### 2.2 格式要求
- 缩进使用4个空格（见265-278行）
- 长字符串推荐使用here document（见294-299行）
- 管道符单独成行（见339-359行）

## 3. 控制结构
### 3.1 条件判断
```bash
# 推荐写法（见672-685行）
if [[ -n "$var" ]]; then
  # 处理非空变量
fi
```

### 3.2 循环结构
```bash
# 数组遍历最佳实践（见825-832行）
for item in "${array[@]}"; do
  process "$item"
done
```

## 4. 高级特性
### 4.1 数组使用
- 优势：支持复杂数据结构（见868-873行）
- 局限：语法稍复杂（见874-884行）
- 推荐场景：需要保持元素顺序时（见885-901行）

### 4.2 算术运算
```bash
# 推荐写法（见972-976行）
if (( num > 0 )); then
  echo "Positive number"
fi
```

## 5. 风险防范
### 5.1 文件操作
```bash
# 安全删除示例（见778-787行）
rm -f /path/to/file  # 替换为实际路径
```

### 5.2 命令替换
- 推荐使用`$(...)`代替反引号（见625-636行）

## 6. 代码质量
### 6.1 工具使用
- 强制要求通过ShellCheck验证（见606-613行）
- 使用`set -euo pipefail`增强错误处理（见文件开头）

### 6.2 变量管理
- 局部变量必须声明为`local`（见1208-1220行）
- 常量使用`readonly`声明（见1127-1134行）

---
> 原文引用：本指南综合自`google-guide.md`的1343行规范内容，完整技术细节请参考原始文档。
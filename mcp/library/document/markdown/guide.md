# Markdown 风格指南

## 三大平衡目标

- -*源文本可读性与可移植性**：确保Markdown在纯文本状态下易读，兼容不同工具。
- -*语料库可维护性**：跨团队、跨时间保持风格一致，降低维护成本。
- -*语法简单易记性**：优先使用标准Markdown，避免复杂语法。

## 文档结构与布局

### 标准文档模板

```markdown
# 文档标题

作者/维护者（可选）  
简介（1-3句，面向新手的主题概述）

[TOC]（若托管服务支持，如Gitiles，且内容超过一屏）

## 主要内容

...

## 参考资料

- 相关链接  
```

### 标题规范

- **ATX风格**：`# H1`、`## H2`，禁用`=`或`-`式标题。
- **唯一性与完整性**：标题需唯一且描述完整（如`### Foo功能总结`）。
- **间距要求**：标题前后空行（如`...文本\n\n## 标题\n\n后续文本...`）。
- **H1规则**：文档仅一个H1，与文件名一致，作为页面标题。
- **标题大小写**：首字母大写，重要词大写，连词/介词小写（如`Markdown 风格指南`）。

## 内容格式规范

### 标题与目录（TOC）

- **TOC触发条件**：内容超过笔记本电脑首屏时，在简介后、首个二级标题前添加`[TOC]`。
- **位置重要性**：避免将TOC置于文档末尾，以免影响屏幕阅读器顺序。

### 字符行限制

- **常规内容**：80字符/行（与代码风格统一）。
- **例外场景**：标题、代码块、链接可超出，但链接前后文本需换行：
  ```markdown
  - 查看 [详细文档](https://example.com/long/path/to/document)  
    了解更多信息。  
  ```

### 尾随空格与换行

- **禁止尾随空格**：使用`反斜杠\`换行（如`文本换行示例\`），但优先用空行分段落。

### 列表规范

- **长列表懒编号**：动态列表用`-`，Markdown自动编号：
  ```markdown
  - 步骤一
  - 步骤二  
    - 子步骤一
    - 子步骤二
  ```
- **短列表全编号**：固定且简短的列表（3项内）用无序列表`-`。
- **嵌套缩进**：子项需4空格缩进，子子项8空格：
  ```markdown
  - 主项  
    4空格缩进文本  
    - 子项（3空格+`-`，文本缩进4空格）  
      1. 子子项（2空格+编号，文本缩进8空格）  
  ```

### 代码块处理

- **内联代码**：用反引号包裹（如`run script.sh`）。
- **围栏代码块**：强制使用```包裹，声明语言（如```python），禁用缩进式代码块。
- **换行转义**：命令行代码行尾加`\`：
  ```shell
  $ bazel build target --flag1=value \
    --flag2=long_value
  ```
- **列表中嵌套代码块**：缩进4空格保持列表结构：
  ```markdown
  - 操作步骤：  
    ```bash
    cd project  
    make install  
    ```  
  ```

### 链接规范

- **显式路径**：内部链接用相对路径（如`/path/to/file.md`），避免`../`。
- **描述性文本**：链接文本需有意义（如`[查看指南](styleguide.md)`）。
- **参考链接**：
	- **适用场景**：长URL或重复链接。
	- **定义位置**：首次使用后、下一个标题前定义，或文档末尾（跨章节引用）。
  ```markdown
  详见 [风格指南][style]。  
  [style]: https://example.com/styleguide  
  ```

### 表格与图像规范

#### 表格使用原则

- **适用场景**：二维数据分布均匀、多属性并行项（如交通工具对比表）。
- **对齐方式**：通过`|:|`（左）、`|:|`（右）、`|:--:|`（居中）定义列对齐。
- **示例**：
  ```markdown
  | 工具       | 文档链接       | 用途               |  
  |------------|----------------|--------------------|  
  | Gitiles    | [链接1]        | 代码托管           |  
  | Bazel      | [链接2]        | 构建系统           |  

  [链接1]: https://gitiles.com/docs  
  [链接2]: https://bazel.build/docs  
  ```
- **反例优化**：
  ```markdown
  | 交通方式 | 适用人群   | 优势                  |  
  |----------|------------|-----------------------|  
  | 自行车   | 城市居民   | [耐用][bike_durability] |  
  [bike_durability]: https://example.com/bike  
  ```

#### 图像规范

- **使用场景**：UI导航等文字难以描述的场景。
- **无障碍要求**：必须添加`alt`文本（如`![配置界面截图：显示网络设置选项]`）。

## 文档维护与协作

### 最小可行文档（MVD）

- **核心原则**：优先维护少量准确文档，定期清理过时内容。
- **文档分类**：明确类型（如发布文档、API文档），按类型管理。

### Better/Best 原则

- **评审标准**：
	- 评审者：合理时直接LGTM，建议具体修改；重大变更可提交后续CL。
	- 作者：避免无意义争论，引用原则推进迭代。

### 版本控制与协作

- **提交规范**：使用Git管理变更，提交信息清晰（如`docs: 更新API参考`）。
- **代码审查**：所有文档变更需通过审查，确保一致性。

## 命名与大小写规范

- **产品名称**：保留原大小写（如`Gitiles`而非`gitiles`）。

## 常见问题与避坑指南

- **HTML混用**：仅在必要时使用（如复杂表格），优先纯Markdown。
- **字符编码**：文件统一为UTF-8编码。
- **行尾格式**：使用LF（Unix风格）而非CRLF（Windows风格）
- **工具兼容性**：Gitiles不支持HTML渲染，避免使用HTML标签Z
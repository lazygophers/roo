# Markdown 风格指南

- 三大平衡目标

- 源文本可读性与可移植性：确保 Markdown 文本在纯文本状态下易读，且能兼容不同工具。
- 语料库可维护性：跨团队、跨时间的文档风格一致，降低维护成本。
- 语法简单易记性：避免复杂语法，优先使用标准 Markdown 规范。


- 优先使用标准 Markdown 语法，避免 HTML（大表格除外），因 HTML 会降低文档可移植性，且 Gitiles 不渲染 HTML。

### 文档结构与布局

- 标准文档模板
   ```markdown
   # 文档标题  
   作者（可选）  
   简短介绍（1-3 句话，面向新手的主题概述）  
   [TOC]（若托管服务支持，如 Gitiles）  
   ## 主题 1  
   内容...  
   ## 主题 2  
   内容...  
   ## 另请参阅  
   - 相关链接  
   ```  

### 标题规范

- ATX 风格：使用 `# 一级标题`、`## 二级标题`，避免使用 `=` 或 `-` 下划线式标题（难维护且层级不明确）。
- 唯一性与完整性：标题需唯一且描述完整，例如将 `### 总结` 改为 `### Foo 功能总结`，确保自动生成的锚点链接清晰。
- 间距要求：标题前后添加空行，如 `...文本\n\n## 标题\n\n后续文本...`，避免紧凑排版。
- 单一 H1 原则：文档仅一个一级标题，且与文件名一致，作为页面 `<title>`。

目录（TOC）使用

- 触发条件：若内容在笔记本电脑首屏无法完全显示，需在简介后、首个二级标题前添加 `[TOC]`。
- 位置重要性：`[TOC]` 的位置影响屏幕阅读器和键盘导航，需避免放置在文档末尾（会导致阅读器最后才读取目录）。

### 内容格式规范

#### 字符行限制

- 常规内容遵循 80 字符/行，与代码风格统一，便于工具集成（如 Code Search 不自动换行）。
- 例外场景：链接、表格、标题、代码块可超出 80 字符，但链接前后文本需换行，例如：
  ```markdown
  - 查看 [详细文档](https://example.com/long/path/to/document)  
    了解更多信息。  
  ```  

#### 尾随空格与换行

- 禁止尾随空格，可使用尾随反斜杠 `\` 换行（如 `文本换行示例\`），但最佳实践是用空行创建段落（避免使用 `<br>`）。

#### 列表规范

- 长列表懒编号：列表可能变动时，使用 `-` 统一编号（Markdown 会自动渲染正确序号），例如：
  ```markdown
  - 步骤一
  - 步骤二
      - 子步骤一
      - 子步骤二
  - 步骤三
  ```
- 短列表全编号：固定且简短的列表（如 3 项以内）使用 `-` 无序列表。
- 嵌套缩进：嵌套列表需 4 空格缩进，例如：
  ```markdown
  - 主项  
    4 空格缩进文本  
    - 子项（3 空格+ bullet，文本缩进 4 空格）  
      1. 子子项（2 空格+编号，文本缩进 8 空格）  
  ```  

#### 代码块处理

- 内联代码：用反引号包裹，如 `run script.sh`，用于文件名、字段名等。
- 围栏代码块：优先使用 ``` 包裹，声明语言（如 ```python），避免缩进式代码块（无法指定语言、边界不清晰）。
- 换行转义：命令行代码如需复制粘贴，行尾加反斜杠转义换行，例如：
  ```shell
  $ bazel build target --flag1=value \
    --flag2=long_value
  ```  
- 列表中嵌套代码块：缩进 4 空格以保持列表结构，例如：
  ```markdown
  - 操作步骤：  
    ```bash
    cd project  
    make install  
    ```  
  ```

#### 链接规范

- 显式路径：内部链接使用相对路径（同目录可直接引用文件名，跨目录用 `/path/to/file.md`），避免 `../` 层级跳转。
- 描述性标题：链接文本需有意义，避免 `[点击这里](link)`，应写成 `[查看 Markdown 指南](markdown.md)`。
- 参考链接（Reference Links）：
	- 适用场景：长链接（如表格中）或重复链接，拆分为引用标记与定义，例如：
	  ```markdown
	  详见 [风格指南][style]。  
	  [style]: https://example.com/styleguide  
	  ```  
	- 定义位置：首次使用后、下一个标题前定义，或在文档末尾（跨章节引用时）。

## 表格与图像规范

#### 表格使用原则

- 适用场景：二维数据分布均匀、多属性并行项（如交通工具对比表），避免冗长散文式单元格。
- 反例优化：
- 坏示例（数据不平衡、单元格冗长）：
  ```markdown
  | 水果 | 指标 | 生长环境 | ... |  
  |------|------|----------|-----|  
  | 苹果 | 流行 | 树       | ... |  
  ```  
- 好示例（紧凑、参考链接简化）：
  ```markdown
  | 交通方式 | 适用人群   | 优势                  |  
  |----------|------------|-----------------------|  
  | 自行车   | 城市居民   | [耐用][bike_durability] |  
  | [链接定义放在表格后]  
  ```  

#### 图像规范

- 使用场景：UI 导航等难以用文字描述的场景，优先简单截图。
- 无障碍要求：必须添加 `alt` 文本，描述图像内容（如 `![配置界面截图：显示网络设置选项]`）。

### 文档维护与协作

最小可行文档（MVD）

- 优先维护少量新鲜、准确的文档，定期删除过时内容，避免“文档膨胀”。
- 明确文档类型（发布文档、API 文档等），按类型分类管理。

#### Better/Best 原则

- 文档评审标准低于代码评审，鼓励快速迭代：
	- 评审者：合理时直接 LGTM，建议具体修改而非模糊评论；重大变更可自行提交后续 CL。
	- 作者：避免无意义争论，引用该原则推进迭代。

### 大小写与命名规范

- 产品名称保留原大小写：如 `Markdown` 而非 `markdown`，`Gitiles` 需与官方名称一致。

### JSDoc 中的 Markdown 应用

- JSDoc 用 Markdown 编写，可含 HTML，工具解析时忽略纯文本格式，需用 Markdown 列表。
- 标签规范：
	- 简单标签（如 `@private`、`@const`）可同行，复杂标签（如 `@desc`）需换行缩进 4 空格。

### 示例汇总

#### 标题与目录示例

   ```markdown
   # Markdown 风格指南

作者：Google 文档团队  
本文介绍 Google 内部 Markdown 编写规范，帮助团队保持文档一致性...  
[TOC]

## 标题规范

### 一级标题用法...  
   ```  

#### 参考链接示例

   ```markdown
   更多细节见 [Google 开发者文档风格指南][dev_style]。  
[dev_style]: https://developers.google.com/style-guide  
   ```  

#### 表格与参考链接结合示例

   ```markdown
	| 工具       | 文档链接       | 用途               |  
	|------------|----------------|--------------------|  
	| Gitiles    | [链接1]        | 代码托管           |  
	| Bazel      | [链接2]        | 构建系统           |  
	
	[链接1]: https://gitiles.com/docs
	
	[链接2]: https://bazel.build/docs  
   ```  

通过以上规范，可确保 Markdown 文档在可读性、可维护性和工具兼容性上达到 Google 工程团队的标准，同时兼顾协作效率与内容质量。以下是对
Google 文档风格指南中 Markdown 规范的详细解读和补充：

## Markdown 风格指南详解

#### 1. 文档结构与布局

- 标题层级：
	- H1 标题：每个文档仅限一个，建议与文件名一致（如 `README.md` 的 H1 为 `# README`），作为页面标题。
	- H2-H6 标题：使用简洁、描述性的标题，避免模糊术语（如 "Details"）。
	- 标题大小写：遵循标准英文标题格式（首字母大写，重要词汇大写，连词/介词小写）。

- 文档模板：
  ```markdown
  # 文档标题
  [作者/维护者信息]
  
  简介（1-3 句话概述文档目标，面向新手）
  
  [TOC]  # 目录（若内容超过一屏）
  
  ## 主要内容
  ...
  
  ## 参考资料
  - 相关文档链接
  - 其他资源
  ```

#### 2. 内容格式规范

- 列表规则：
	- 无序列表：使用 `-` 或 `*`（保持一致性）。
	- 有序列表：使用懒编号（如 `1.` 开头即可）。
	- 嵌套列表：缩进 4 个空格，例如：
	  ```markdown
	  1. 一级列表
		 - 二级列表
		   - 三级列表
	  ```

- 代码块：
	- 语言声明：必须指定语言（如 ````python`），提高语法高亮准确性。
	- 多行代码：使用围栏式（```）而非缩进式（Tab/空格）。
	- 示例：
	  ```python
	  def main():
		  print("Hello, world!")
	  ```

- 链接与引用：
	- 内部链接：使用相对路径（如 `[指南](styleguide.md)`）。
	- 外部链接：使用完整 URL，并添加描述性文本：
	  ```markdown
	  [Google 搜索](https://www.google.com)
	  ```
	- 参考式链接：用于长 URL，保持正文简洁：
	  ```markdown
	  访问 [Google][google] 获取更多信息。
	  
	  [google]: https://www.google.com
	  ```

- 表格优化：
	- 对齐方式：使用 `|` 和 `-` 定义表头和对齐（`:---` 左对齐，`---: `右对齐，`:--:` 居中）。
	- 示例：
	  ```markdown
	  | 姓名   | 年龄 | 职业   |
	  |--------|------|--------|
	  | Alice  | 25   | 工程师 |
	  | Bob    | 30   | 设计师 |
	  ```

#### 3. 文档维护与最佳实践

- 最小可行文档：
	- 避免冗余内容，优先编写高频使用的核心文档。
	- 定期清理过时内容（如废弃的 API 文档）。

- 可访问性考量：
	- 图像替代文本：所有图像必须添加 `alt` 属性（如 `<img src="logo.png" alt="公司标志">`）。
	- 链接文本：避免使用“点击此处”，改用描述性文本（如“下载最新版本”）。

- 协作规范：
	- 版本控制：使用 Git 管理文档变更，提交信息清晰（如 `docs: 更新 API 参考`）。
	- 代码审查：所有文档变更需通过代码审查，确保一致性。

### 补充规范（基于其他 Google 风格指南）

#### 1. JSDoc 与 Markdown 结合

- 注释格式：
  ```javascript
  /
   * 计算两个数字的和。
   * @param {number} a - 第一个数字。
   * @param {number} b - 第二个数字。
   * @returns {number} 两数之和。
   */
  function add(a, b) {
    return a + b;
  }
  ```

#### 2. 跨语言文档共性

- 术语一致性：统一技术术语（如“客户端”而非“客户机”）。
- 示例代码：
	- 使用真实场景而非简化示例。
	- 添加必要的注释解释关键逻辑。

### 常见问题与避坑指南

- HTML 混用：仅在必要时使用 HTML（如复杂表格），优先使用纯 Markdown。
	- 字符编码：确保文件为 UTF-8 编码，避免特殊字符乱码。
- 行尾格式：统一使用 LF（Unix 风格）而非 CRLF（Windows 风格）。
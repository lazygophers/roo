# ✨ 核心工作流：一切行动的最高准则

> **本部分是所有任务都必须遵循的最高行动纲领，其优先级高于一切。**

---

## 核心原则 (Core Principles)

本工作流建立在两大基石之上，它们是所有阶段和步骤的根本前提。

### 1. 记忆驱动 (Memory-Driven)

- **核心定义**: 关于记忆库的完整架构、工作流和交互协议，请参见权威文档：[`memory.md`](memory.md)。
- **行为准则**: 本工作流的所有阶段都严格依赖于 [`memory.md`](memory.md) 中定义的原则。所有上下文的加载、传递、记录和清理都必须遵循记忆库规范。

### 2. 用户决策主权 (User-Centric Decision)

- **核心定义**: 用户的决策是任务推进的最终依据。所有关键决策点都必须遵循 [`decision-flow.md`](decision-flow.md) 规范。
- **行为准则**: 在方案选择、风险操作确认等关键节点，**必须**将决策权交还给用户。

---

## 阶段 1：规划与准备 (Planning & Preparation)

本阶段的核心目标是将模糊的用户需求转化为清晰、可执行的任务计划。

### 步骤 1.1: [输入] 任务理解与澄清

1.  **重述理解**：用自己的语言清晰地重新描述需求。
2.  **目标识别**：明确指出要达成的核心目标和关键约束。
3.  **需求挖掘**：基于专业知识，指出可能被忽略的隐含需求。
4.  **歧义澄清**：如果存在任何模糊之处，**必须**提请用户确认。

### 步骤 1.2: [认知] 方案设计与对比

确认需求后，**必须**进行深度思考，并提供结构化的方案。

1.  **解决方案概览**: 列出所有可行的技术方案（通常 2-4 个），并简要概括。
2.  **详细方案分析**: 对每个方案进行多维度分析（核心思路、实施步骤、优劣势、适用场景等）。

### 步骤 1.3: [决策] 方案推荐与确认

1.  **决策矩阵**: 当方案超过 2 个时，**必须**提供清晰的决策矩阵（Markdown 表格）进行对比。
2.  **明确推荐**: 明确提出最优选择，并详细阐述推荐理由。
3.  **决策提请**: **必须**将最终方案选择权交还给用户。

---

## 阶段 2：执行与追踪 (Execution & Tracking)

本阶段的核心目标是高效、透明地完成已规划的任务。

### 步骤 2.1: [执行] 任务实施

- 严格按照用户确认的任务清单执行，所有与记忆相关的操作（如指针解析、动态更新）均遵循 [`memory.md`](memory.md) 规范。

### 步骤 2.2: [追踪] 状态同步

- 在每个子任务开始和结束时，**必须**实时更新任务状态，确保进度透明。

---

## 阶段 3：交付与沉淀 (Delivery & Persistence)

本阶段的核心目标是交付最终成果，并将过程中的有价值信息沉淀为知识。

### 步骤 3.1: [交付] 成果确认

1.  **最终确认**: 在所有任务完成后，进行最终的复盘和确认。
2.  **成果交付**: 提交最终的交付物。

### 步骤 3.2: [沉淀] 知识转化与清理

- **知识沉淀**: 对于执行过程中产生的可复用知识，遵循 [`memory.md`](memory.md) 中的提交流程，将其沉淀到记忆库。
- **记忆清理**: 遵循 [`memory.md`](memory.md) 中的“受控清理”原则，在任务结束后安全、彻底地清理工作记忆。

[`memory.md`]: memory.md
[`decision-flow.md`]: decision-flow.md

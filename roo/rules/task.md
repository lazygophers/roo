# ä»»åŠ¡ç®¡ç†æŒ‡å—

> AI ç³»ç»Ÿä»»åŠ¡åˆ†è§£ã€è¯„ä¼°ä¸æ‰§è¡Œçš„æ ¸å¿ƒè§„èŒƒã€‚

---

## æ ¸å¿ƒç†å¿µ

**ä»»åŠ¡ç®¡ç†å“²å­¦**

- **ç®€æ´æ˜äº†:** æ‰€æœ‰æè¿°ã€è¦æ±‚å’Œäº¤ä»˜ç‰©éƒ½åº”ç®€æ´æ¸…æ™°ï¼Œé¿å…å†—ä½™ä¿¡æ¯ã€‚
- **ç²¾å‡†åŒ¹é…:** ä»…æä¾›ä¸ä»»åŠ¡ç›´æ¥ç›¸å…³çš„ä¸Šä¸‹æ–‡ï¼Œç¡®ä¿ä¿¡æ¯é«˜åº¦èšç„¦ã€‚
- **æ¨¡å¼é©±åŠ¨:** åŸºäºä»»åŠ¡æ€§è´¨æ™ºèƒ½é€‰æ‹©æœ€é€‚åˆçš„ä¸“ä¸šæ¨¡å¼ã€‚
- **ä»·å€¼å¯¼å‘:** æ¯ä¸ªä»»åŠ¡éƒ½åº”æ˜ç¡®å…¶ä»·å€¼ç‚¹å’Œé¢„æœŸäº§å‡ºã€‚

---

## ä»»åŠ¡è¯„ä¼°ä¸åˆ†è§£

**ä»»åŠ¡åˆ†è§£åŸåˆ™**

- **å•ä¸€èŒè´£:** æ¯ä¸ªå­ä»»åŠ¡åªåšä¸€ä»¶äº‹ã€‚
- **åŸå­æ€§:** ä»»åŠ¡åº”æ˜¯ä¸å¯å†åˆ†çš„æœ€å°æ‰§è¡Œå•å…ƒã€‚
- **ç‹¬ç«‹éªŒè¯:** å­ä»»åŠ¡çš„ç»“æœåº”èƒ½è¢«ç‹¬ç«‹æµ‹è¯•å’ŒéªŒæ”¶ã€‚
- **ç®€æ´æ€§:** ä»»åŠ¡æè¿°å’Œè¦æ±‚å¿…é¡»ç®€æ´æ˜äº†ï¼Œé¿å…æ­§ä¹‰ã€‚

---

## ä»»åŠ¡è°ƒåº¦ä¸æ¨¡å¼é€‰æ‹©

**é€šç”¨å‡†åˆ™**

- **è§„åˆ’å…ˆè¡Œ:** ä»»ä½•å¤æ‚ä»»åŠ¡åœ¨æ‰§è¡Œå‰ï¼Œéƒ½å¿…é¡»ç”± `orchestrator` æ¨¡å¼è¿›è¡Œåˆ†è§£ï¼Œå¹¶é€šè¿‡ `ask_followup_question` æè¯·ç”¨æˆ·ç¡®è®¤ä»»åŠ¡æ¸…å•ã€‚
- **ä¸“ä¸šåˆ†å·¥:** æ ¹æ®ä»»åŠ¡æ€§è´¨ï¼Œé€šè¿‡ `new_task` å§”æ´¾ç»™æœ€åˆé€‚çš„ä¸“ä¸šæ¨¡å¼ã€‚

**æ ¸å¿ƒæ¨¡å¼èŒè´£**

| æ¨¡å¼ Slug          | åç§°            | æ ¸å¿ƒèŒè´£ä¸ç”¨é€”                                               | æ¨¡å‹é€‰æ‹©æŒ‡å¯¼                          |
| ------------------ | --------------- | ------------------------------------------------------------ | ------------------------------------- |
| `orchestrator`     | ğŸ§  Brain        | ä»»åŠ¡åˆ†è§£ã€å¤æ‚å†³ç­–ã€å¤šæ­¥éª¤è§„åˆ’ã€‚                             | é€‚åˆå¤æ‚æ¨ç†å’Œè§„åˆ’èƒ½åŠ›çš„æ¨¡å‹          |
| `architect`        | ğŸ—ï¸ é¡¶å°–æ¶æ„å¸ˆ   | ç³»ç»Ÿæ¶æ„è®¾è®¡ã€æŠ€æœ¯é€‰å‹è¯„ä¼°ã€é‡æ„è§„åˆ’ç­‰é¡¶å±‚è®¾è®¡æ´»åŠ¨ã€‚         | éœ€è¦å¼ºå¤§æŠ€æœ¯ç†è§£å’Œè®¾è®¡èƒ½åŠ›çš„æ¨¡å‹      |
| `code` / `code-*`  | ğŸª„ ä»£ç é­”æ³•å¸ˆ   | å„ç±»ä»£ç çš„ç¼–å†™ã€åŠŸèƒ½å®ç°ä¸è°ƒè¯•ã€‚                             | æ ¹æ®ç¼–ç¨‹è¯­è¨€é€‰æ‹©å¯¹åº”çš„ä¸“ç”¨æ¨¡å‹        |
| `ask`              | ğŸ“š å­¦æœ¯é¡¾é—®     | ä»£ç è§£é‡Šã€æ¦‚å¿µæ¢ç´¢å’ŒæŠ€æœ¯å­¦ä¹ ï¼Œæä¾›è¯¦å°½çš„å›¾æ–‡ç­”æ¡ˆã€‚           | é€‚åˆæ•™å­¦å’Œè§£é‡Šèƒ½åŠ›å¼ºçš„æ¨¡å‹            |
| `debug`            | ğŸ”¬ å¼‚å¸¸åˆ†æå¸ˆ   | è¿½è¸ª Bugã€è¯Šæ–­é”™è¯¯å’Œè§£å†³å¤æ‚é—®é¢˜ã€‚                           | éœ€è¦é€»è¾‘åˆ†æå’Œæ¨ç†èƒ½åŠ›çš„æ¨¡å‹          |
| `doc-writer`       | âœï¸ æ–‡æ¡£å·¥ç¨‹å¸ˆ   | åˆ›å»ºã€æ›´æ–°æˆ–æ”¹è¿›é¡¹ç›®æ–‡æ¡£ã€‚                                   | é€‚åˆå†™ä½œå’Œç»„ç»‡èƒ½åŠ›å¼ºçš„æ¨¡å‹            |
| `giter`            | âš™ï¸ ç‰ˆæœ¬æ§åˆ¶ä¸“å®¶ | æ‰§è¡Œç‰ˆæœ¬æ§åˆ¶æ“ä½œï¼Œå¦‚æäº¤ã€å˜åŸºå’Œåˆ†æ”¯ç®¡ç†ã€‚                   | ç†Ÿæ‚‰ Git å·¥ä½œæµçš„æ¨¡å‹                 |
| `researcher`       | ğŸ“š é¦–å¸­ç ”ç©¶å‘˜   | ç³»ç»ŸåŒ–æ•´ç†æŠ€æœ¯çŸ¥è¯†ã€è¿›è¡ŒæŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”åˆ†ææˆ–æ„å»ºé¢†åŸŸçŸ¥è¯†ä½“ç³»ã€‚ | éœ€è¦å¼ºå¤§ä¿¡æ¯æ•´åˆå’Œåˆ†æèƒ½åŠ›çš„æ¨¡å‹      |
| `project-research` | ğŸ” é¡¹ç›®ç ”ç©¶å‘˜   | æ·±å…¥äº†è§£ä¸€ä¸ªä»£ç åº“ï¼Œè¿›è¡ŒæŠ€æœ¯é€‰å‹æˆ–é‡æ„å‰çš„åˆ†æã€‚             | é€‚åˆä»£ç ç†è§£å’Œæ¨¡å¼è¯†åˆ«çš„æ¨¡å‹          |
| `mode-writer`      | âœï¸ æ¨¡å¼å·¥ç¨‹å¤§å¸ˆ | ä¸ºç²¾å¿ƒè®¾è®¡ã€åˆ›å»ºã€é‡æ„æˆ–ä¼˜åŒ–ä¸€ä¸ªæ¨¡å¼ã€‚                       | éœ€è¦å…ƒç¼–ç¨‹å’Œç³»ç»Ÿè®¾è®¡èƒ½åŠ›çš„æ¨¡å‹        |
| `memory`           | ğŸ§  è®°å¿†ä¸­æ¢     | ä»¥è‡ªåŠ¨åŒ–ã€è§„èŒƒåŒ–çš„æ–¹å¼åˆå§‹åŒ–è®°å¿†åº“æˆ–æ¸…ç†ä¸´æ—¶è®°å¿†ã€‚           | é€‚åˆç»“æ„åŒ–å¤„ç†å’Œè®°å¿†ç®¡ç†çš„æ¨¡å‹        |

---

## é€šç”¨å·¥ä½œæµä¸æœ€ä½³å®è·µ

### ä»»åŠ¡ä¸äº¤äº’åŸåˆ™

1. **æ¨¡å¼åˆ‡æ¢**: ç¦æ­¢ä½¿ç”¨ `switch_mode` è¿›è¡Œæ¨¡å¼åˆ‡æ¢ï¼Œæ‰€æœ‰æ¨¡å¼é—´çš„è½¬æ¢ä¸ä»»åŠ¡å§”æ´¾ï¼Œéƒ½å¿…é¡»é€šè¿‡ `new_task` å®Œæˆã€‚
2. **ä»»åŠ¡ç²’åº¦**: åœ¨é `orchestrator` æ¨¡å¼ä¸‹æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¿…é¡»å°†ä»»åŠ¡åˆ†è§£å¾—å°½å¯èƒ½ç»†è‡´ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚
3. **å†³ç­–ç¡®è®¤**: å¿…é¡»é€šè¿‡ `ask_followup_question` å‘ç”¨æˆ·æè¯·å¯¹æœ€ç»ˆä»»åŠ¡æ¸…å•çš„ç¡®è®¤ã€‚å¦‚æœç”¨æˆ·æå‡ºå˜æ›´ï¼Œåœ¨åº”ç”¨å˜æ›´åï¼Œå¿…é¡»é‡æ–°å‘èµ·ç¡®è®¤æµç¨‹ã€‚
4. **ä¿¡æ¯å‘ˆç°**: åœ¨ä½¿ç”¨ `ask_followup_question` è¿›è¡Œç¡®è®¤æ—¶ï¼Œå¿…é¡»ç»¼åˆè¿ç”¨æµç¨‹å›¾ã€æ¸…å•ã€è¡¨æ ¼ç­‰å¤šç§å¯è§†åŒ–æ–¹å¼ï¼Œå‘ç”¨æˆ·æ¸…æ™°ã€è¯¦å°½åœ°å±•ç¤ºå¾…ç¡®è®¤çš„å†…å®¹ã€‚
5. **æ¨¡å¼ä¸“ä¸šåŒ–**: ä¸¥æ ¼éµå¾ªä¸“ä¸šåˆ†å·¥åŸåˆ™ï¼Œç¡®ä¿æ¯ä¸ªæ¨¡å¼åªå¤„ç†å…¶æ“…é•¿çš„é¢†åŸŸï¼Œè¶…å‡ºèƒ½åŠ›èŒƒå›´çš„ä»»åŠ¡å¿…é¡»é€šè¿‡ `new_task` å§”æ´¾ã€‚
6. **ä¸Šä¸‹æ–‡ç²¾ç®€**: åœ¨ä»»åŠ¡å§”æ´¾å’Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä»…ä¼ é€’ä¸ä»»åŠ¡ç›´æ¥ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé¿å…ä¿¡æ¯è¿‡è½½ã€‚

### æ ¸å¿ƒåŸåˆ™

1. **åˆ†å±‚å†³ç­–**: L1 çº§å†³ç­–å¿…é¡»è¯·æ±‚ç”¨æˆ·ç¡®è®¤
2. **æ‰¹é‡ä¼˜åŒ–**: åˆå¹¶å¤šä¸ªä¿®æ”¹åˆ°å•ä¸ª `apply_diff`
3. **éªŒè¯å…ˆè¡Œ**: ä¿®æ”¹å‰ç”¨ `list_files` ç¡®è®¤æ–‡ä»¶å­˜åœ¨
4. **åŠæ—¶æ›´æ–°**: æ¯ä¸ªå…³é”®èŠ‚ç‚¹æ›´æ–° `update_todo_list`
5. **å·¥å…·ä¼˜å…ˆçº§**:
   - æ–‡ä»¶ä¿®æ”¹ï¼š`apply_diff` > `search_and_replace` > `write_to_file` > `execute_command`
   - æ–‡ä»¶æ¢ç´¢ï¼š`execute_command` > å†…å»ºå·¥å…·

### `ask_followup_question` ä½¿ç”¨è§„èŒƒ

1. **ä¸»å¯¼æƒç§»äº¤**: é¢‘ç¹ä½¿ç”¨æ­¤å·¥å…·ï¼Œå°†å†³ç­–æƒäº¤è¿˜ç»™ç”¨æˆ·ï¼Œç¡®ä¿ç”¨æˆ·ä¸»å¯¼æ•´ä½“è¿›ç¨‹ã€‚
2. **æé—®æ—¶æœºä¸å½¢å¼**: å½“å­˜åœ¨å¤šç§å¯èƒ½æ€§æˆ–éœ€è¦æ¾„æ¸…æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ­¤å·¥å…·ã€‚`question` éƒ¨åˆ†éœ€æä¾›å®Œæ•´èƒŒæ™¯ï¼Œå¯ä½¿ç”¨å›¾è¡¨å¢å¼ºç†è§£ï¼›å¯¹ `suggest` çš„è§£é‡Šä¹Ÿåº”åœ¨æ­¤éƒ¨åˆ†å®Œæˆã€‚
3. **å»ºè®®çš„ç®€æ´æ€§**: `suggest` é€‰é¡¹åº”ä¿æŒç®€æ´ã€æ˜ç¡®ï¼Œä¸åŒ…å«è§£é‡Šæ€§æ–‡å­—ã€‚
4. **å»ºè®®çš„æ•°é‡ä¸æ’åº**: é»˜è®¤æä¾›ä¸å°‘äº 8 ä¸ª `suggest` é€‰é¡¹ï¼ˆè¶Šå¤šè¶Šå¥½ï¼‰ï¼Œä¸”æ‰€æœ‰é€‰é¡¹å¿…é¡»æŒ‰ç…§æ¨èç¨‹åº¦ç”±é«˜åˆ°ä½æ’åºï¼ˆæœ€æ¨èçš„åœ¨å‰ï¼‰ã€‚

### æ€§èƒ½ä¼˜åŒ–

- **æ‰¹é‡æ“ä½œ**:
  - å•ä¸ª `apply_diff` å¤„ç†å¤šä¸ªä¿®æ”¹
  - åˆå¹¶å¤šä¸ª `read_file` è¯·æ±‚ï¼ˆæœ€å¤š 5 ä¸ªï¼‰

### `new_task` å§”æ´¾è§„èŒƒ

**`message` å­—æ®µ**

- **æ¶ˆæ¯æ ¼å¼**: `message` å­—æ®µçš„æ ¼å¼ä¸º `ä»»åŠ¡è¦æ±‚ï¼š{{å†…å®¹}}\nè¿”å›è¦æ±‚ï¼š{{å†…å®¹}}`ã€‚

  - `ä»»åŠ¡è¦æ±‚`ï¼šä¸€ä¸ªå•è¡Œã€å‹ç¼©åçš„ JSON å­—ç¬¦ä¸²ï¼Œéµå¾ªä¸‹æ–‡å®šä¹‰çš„ `New Task Message Schema`ã€‚
  - `è¿”å›è¦æ±‚`ï¼šä¸€ä¸ªå•è¡Œã€å‹ç¼©åçš„ JSON Schema å­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†ä»»åŠ¡çš„äº¤ä»˜ç‰©ç»“æ„ã€‚ç”¨äºä»»åŠ¡å®Œæˆåï¼Œå­ä»»åŠ¡å‘ä»˜ä»»åŠ¡è¾“å‡ºçš„äº¤ä»˜ç‰©ç»“æ„å®šä¹‰ã€‚

**`ä»»åŠ¡è¦æ±‚`å­—æ®µè§„èŒƒ**

```json
{
  "title": "New Task Message Schema",
  "description": "å®šä¹‰äº†å‘ç‰¹å®šæ¨¡å¼å§”æ´¾æ–°ä»»åŠ¡çš„ç»“æ„ã€‚**å…è®¸æ·»åŠ é¢å¤–çš„è‡ªå®šä¹‰å±æ€§ï¼Œä½†æ‰€æœ‰å±æ€§åå¿…é¡»æ˜¯å¯é˜…è¯»ã€æ˜ç¡®ä¸”æ— æ­§ä¹‰çš„ï¼Œä»¥ç¡®ä¿äº¤ä»˜ç‰©çš„å¯ç†è§£æ€§ã€‚**",
  "type": "object",
  "properties": {
    "description": {
      "type": "string",
      "description": "å¯¹ä»»åŠ¡æ ¸å¿ƒç›®æ ‡çš„**ä¸€å¥è¯ç²¾å‡†æè¿°**ã€‚ç®€æ´æ˜äº†ï¼Œç›´å¥”ä¸»é¢˜ã€‚ä¾‹å¦‚ï¼š\"ä¸º'user-service'æ·»åŠ Redisç¼“å­˜å±‚\"ã€‚"
    },
    "context": {
      "type": "object",
      "description": "æä¾›ä»»åŠ¡æ‰§è¡Œæ‰€éœ€çš„**èƒŒæ™¯ä¿¡æ¯å’Œä¸Šä¸‹æ–‡**ï¼Œå¸®åŠ©æ‰§è¡Œæ¨¡å¼æ›´å¥½åœ°ç†è§£ä»»åŠ¡ã€‚**ä»…åŒ…å«ä¸ä»»åŠ¡ç›´æ¥ç›¸å…³çš„ä¿¡æ¯**ï¼Œé¿å…å†—ä½™ã€‚",
      "properties": {
        "reason": {
          "type": "string",
          "description": "è§£é‡Š'ä¸ºä»€ä¹ˆ'éœ€è¦æ‰§è¡Œæ­¤ä»»åŠ¡ã€‚"
        },
        "relevant_files": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "åˆ—å‡ºä¸ä»»åŠ¡ç›¸å…³çš„å…³é”®æ–‡ä»¶è·¯å¾„ã€‚"
        },
        "user_persona": {
          "type": "string",
          "description": "æè¿°å‘èµ·ä»»åŠ¡çš„ç”¨æˆ·è§’è‰²æˆ–æ„å›¾ã€‚"
        }
      },
      "required": ["reason"]
    },
    "requirements": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "æ¸…æ™°ã€å¯é‡åŒ–åœ°åˆ—å‡ºä»»åŠ¡**å¿…é¡»æ»¡è¶³çš„å…·ä½“è¦æ±‚**ã€‚æ¯ä¸ªè¦æ±‚éƒ½åº”æ˜¯å¯éªŒè¯çš„ã€‚ä¾‹å¦‚ï¼š[\"ä½¿ç”¨'redis'åº“å®ç°ç¼“å­˜\", \"ç¼“å­˜æœ‰æ•ˆæœŸå¿…é¡»ä¸º1å°æ—¶\", \"å¿…é¡»åŒ…å«é”™è¯¯å¤„ç†é€»è¾‘\"]ã€‚"
    },
    "boundaries": {
      "type": "object",
      "description": "æ˜ç¡®å®šä¹‰ä»»åŠ¡çš„**æ‰§è¡Œè¾¹ç•Œ**ï¼Œé˜²æ­¢ä»»åŠ¡èŒƒå›´è”“å»¶ã€‚",
      "properties": {
        "allowed_files": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "å…è®¸ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ã€‚è·¯å¾„ä¼˜å…ˆçº§ï¼šç›¸å¯¹å·¥ä½œç›®å½• > ç»å¯¹è·¯å¾„ > ç›¸å¯¹è·¯å¾„ã€‚"
        },
        "disallowed_patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "ç¦æ­¢ä¿®æ”¹çš„æ¨¡å—æˆ–ä»£ç æ¨¡å¼ã€‚"
        },
        "tech_stack_constraints": {
          "type": "string",
          "description": "æŠ€æœ¯æ ˆé™åˆ¶ï¼Œå¦‚\"ä»…ä½¿ç”¨æ ‡å‡†åº“\"ã€‚"
        }
      },
      "required": ["allowed_files"]
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "åˆ—å‡ºå½“å‰ä»»åŠ¡æ‰€ä¾èµ–çš„**å‰ç½®ä»»åŠ¡ID**ã€‚æ‰§è¡Œæ¨¡å¼å¯ä»¥æ­¤åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å¯ä»¥å¼€å§‹ã€‚"
    },
    "acceptance_criteria": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "å®šä¹‰ä»»åŠ¡å®Œæˆçš„**éªŒæ”¶æ ‡å‡†**ï¼Œæ˜¯ `requirements` çš„å…·ä½“åŒ–å’Œå¯æµ‹è¯•åŒ–è¡¨è¾¾ã€‚æ¯ä¸ªæ ‡å‡†éƒ½åº”æ˜¯æ¸…æ™°ã€æ— æ­§ä¹‰çš„ã€‚ä¾‹å¦‚ï¼š[\"`get_user`å‡½æ•°åœ¨ç¼“å­˜å‘½ä¸­æ—¶ï¼Œå“åº”æ—¶é—´åº”å°äº50ms\", \"å•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ°90%ä»¥ä¸Š\"]ã€‚"
    },
    "todo_list": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "å¯é€‰çš„ä»»åŠ¡æ¸…å•ã€‚å¦‚æœå½“å‰å§”æ´¾è€…å·²ç»ä¸ºæ–°ä»»åŠ¡ç”Ÿæˆäº†ä»»åŠ¡æ¸…å•ï¼Œåº”åœ¨æ­¤å¤„æä¾›ï¼Œä»¥ä¾¿å­ä»»åŠ¡ç›´æ¥ä½¿ç”¨ã€‚"
    }
  },
  "required": ["description", "requirements", "boundaries"]
}
```

**`è¿”å›è¦æ±‚` å­—æ®µè§„èŒƒ**

- **å‹ç¼©æ ¼å¼**: `è¿”å›è¦æ±‚` çš„å†…å®¹å¿…é¡»æ˜¯**å‹ç¼©åçš„å•è¡Œ JSON æ ¼å¼å­—ç¬¦ä¸²**ï¼Œä¸å…è®¸æ¢è¡Œæˆ–æ ¼å¼åŒ–ç¼©è¿›ã€‚
- **å­—ç¬¦ä¸²è½¬ä¹‰**: ä½œä¸º JSON å­—ç¬¦ä¸²å€¼ï¼Œå†…éƒ¨çš„åŒå¼•å·å¿…é¡»ä½¿ç”¨åæ–œæ è½¬ä¹‰ï¼ˆ`\"`ï¼‰ã€‚
- **è¿”å›æ ¼å¼**: è¿”å›æ ¼å¼æ˜¯ JSON Schemaï¼Œå®šä¹‰äº†ä»»åŠ¡çš„æœ€ç»ˆäº¤ä»˜ç‰©ç»“æ„ã€‚
- **è‡ªå®šä¹‰å±æ€§**: å…è®¸åœ¨ schema ä¸­æ·»åŠ **é JSON Schema æ ‡å‡†å®šä¹‰**çš„è‡ªå®šä¹‰å±æ€§ï¼Œä»¥æ»¡è¶³ç‰¹å®šä»»åŠ¡éœ€æ±‚ã€‚
- **æ‰©å±•æ€§è¯´æ˜**
  - **å‘½åè§„èŒƒ**: æ‰€æœ‰è‡ªå®šä¹‰å±æ€§åå¿…é¡»ï¼š
    - ä½¿ç”¨ **camelCase** æˆ– **snake_case** å‘½å
    - ä¿æŒ**è¯­ä¹‰æ˜ç¡®**ï¼Œé¿å…ç¼©å†™æˆ–æ¨¡ç³Šè¡¨è¿°
    - ä½¿ç”¨**è‹±æ–‡å‘½å**ï¼Œç¡®ä¿è·¨å›¢é˜Ÿåä½œçš„ä¸€è‡´æ€§
- **JsonSchema**:
  ```json
  {
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Task Output Schema",
    "description": "å®šä¹‰äº†ä»»åŠ¡æœ€ç»ˆäº¤ä»˜ç‰©çš„ç»“æ„ï¼Œç¡®ä¿äº¤ä»˜ç‰©æ˜¯ç»“æ„åŒ–ã€å¯æœºè¯»çš„ã€‚å…è®¸æ·»åŠ é¢å¤–çš„è‡ªå®šä¹‰å±æ€§ï¼Œä½†æ‰€æœ‰å±æ€§åå¿…é¡»æ˜¯å¯é˜…è¯»ã€æ˜ç¡®ä¸”æ— æ­§ä¹‰çš„ã€‚",
    "type": "object",
    "properties": {
      "status": {
        "type": "string",
        "description": "ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€ï¼Œå¿…é¡»æ˜¯ 'success', 'failure', æˆ– 'partial_success' ä¹‹ä¸€ã€‚",
        "enum": ["success", "failure", "partial_success"]
      },
      "summary": {
        "type": "string",
        "description": "å¯¹ä»»åŠ¡æ‰§è¡Œç»“æœçš„ç®€è¦æè¿°ï¼Œæ¸…æ™°ä¼ è¾¾æ ¸å¿ƒäº§å‡ºæˆ–é—®é¢˜ã€‚"
      },
      "artifacts": {
        "type": "array",
        "description": "ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆæˆ–ä¿®æ”¹çš„æ–‡ä»¶åˆ—è¡¨ã€‚",
        "items": {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "description": "æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚"
            },
            "description": {
              "type": "string",
              "description": "å¯¹æ–‡ä»¶å˜æ›´å†…å®¹çš„ç®€è¦è¯´æ˜ã€‚"
            }
          },
          "required": ["path"]
        }
      },
      "metrics": {
        "type": "object",
        "description": "ç”¨äºè¡¡é‡ä»»åŠ¡æ‰§è¡Œæ•ˆæœçš„é‡åŒ–æŒ‡æ ‡ã€‚",
        "properties": {
          "coverage": {
            "type": "number",
            "description": "ä»£ç æµ‹è¯•è¦†ç›–ç‡ã€‚"
          }
        }
      },
      "errors": {
        "type": "array",
        "description": "å½“ status ä¸º 'failure' æˆ– 'partial_success' æ—¶ï¼Œæä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯åˆ—è¡¨ã€‚",
        "items": {
          "type": "object",
          "properties": {
            "code": {
              "type": "string",
              "description": "é”™è¯¯ç ã€‚"
            },
            "message": {
              "type": "string",
              "description": "å…·ä½“çš„é”™è¯¯æè¿°ã€‚"
            }
          },
          "required": ["message"]
        }
      },
      "warnings": {
        "type": "array",
        "description": "æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„è­¦å‘Šä¿¡æ¯åˆ—è¡¨ã€‚",
        "items": {
          "type": "string"
        }
      }
    },
    "required": ["status", "summary"],
    "additionalProperties": true
  }
  ```
- **å®Œæ•´ç¤ºä¾‹**
  ```json
  {
    "type": "object",
    "properties": {
      "status": {
        "type": "string",
        "enum": ["success", "failure", "partial_success"],
        "description": "ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€"
      },
      "summary": {
        "type": "string",
        "description": "æ‰§è¡Œç»“æœæ‘˜è¦"
      },
      "artifacts": {
        "type": "array",
        "description": "ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•",
        "items": {
          "type": "object",
          "properties": {
            "path": {
              "type": "string",
              "description": "æ–‡ä»¶è·¯å¾„"
            },
            "action": {
              "type": "string",
              "enum": ["created", "modified", "deleted"],
              "description": "æ“ä½œç±»å‹"
            },
            "linesChanged": {
              "type": "number",
              "description": "ä¿®æ”¹çš„ä»£ç è¡Œæ•°"
            }
          },
          "required": ["path", "action"]
        }
      },
      "metrics": {
        "type": "object",
        "description": "æ€§èƒ½æŒ‡æ ‡",
        "properties": {
          "responseTimeImprovement": {
            "type": "string",
            "description": "å“åº”æ—¶é—´æ”¹å–„ç™¾åˆ†æ¯”"
          },
          "cacheHitRate": {
            "type": "string",
            "description": "ç¼“å­˜å‘½ä¸­ç‡"
          },
          "testCoverage": {
            "type": "number",
            "description": "æµ‹è¯•è¦†ç›–ç‡"
          }
        }
      },
      "implementationDetails": {
        "type": "object",
        "description": "è‡ªå®šä¹‰å­—æ®µï¼šå®ç°ç»†èŠ‚",
        "properties": {
          "cacheProvider": {
            "type": "string",
            "description": "ä½¿ç”¨çš„ç¼“å­˜æä¾›å•†"
          },
          "ttlSeconds": {
            "type": "number",
            "description": "ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰"
          },
          "fallbackStrategy": {
            "type": "string",
            "description": "ç¼“å­˜å¤±æ•ˆæ—¶çš„é™çº§ç­–ç•¥"
          }
        }
      }
    },
    "required": ["status", "summary"],
    "additionalProperties": true
  }
  ```

**æœ€ä½³å®è·µ**

1. **æšä¸¾çº¦æŸ**: å¯¹çŠ¶æ€ç±»å­—æ®µä½¿ç”¨ `enum` é™å®šå¯é€‰å€¼ï¼Œæé«˜æ•°æ®ä¸€è‡´æ€§ã€‚
2. **æè¿°ä¿¡æ¯**: ä¸ºæ¯ä¸ªå­—æ®µæ·»åŠ  `description`ï¼Œæå‡ schema çš„è‡ªæ–‡æ¡£æ€§ã€‚
3. **é»˜è®¤å€¼**: ä¸ºå¯é€‰å­—æ®µè®¾ç½®åˆç†çš„ `default` å€¼ï¼Œç®€åŒ–è°ƒç”¨æ–¹å¤„ç†ã€‚

**è°ƒç”¨æ ·ä¾‹**:

```xml
<new_task>
<mode>code</mode>
<message>
  ä»»åŠ¡è¦æ±‚: {"description":"ä¸º'user-service'çš„'get_user'å‡½æ•°æ·»åŠ Redisç¼“å­˜","context":{"reason":"æå‡ç”¨æˆ·æŸ¥è¯¢æ¥å£çš„æ€§èƒ½","relevant_files":["user_service/logic.py","user_service/tests/test_logic.py"],"user_persona":"åç«¯å¼€å‘äººå‘˜"},"requirements":["ä½¿ç”¨'redis'åº“","ä¸º'get_user'å‡½æ•°æ·»åŠ ç¼“å­˜é€»è¾‘","ç¼“å­˜æœ‰æ•ˆæœŸä¸º1å°æ—¶","å¿…é¡»åŒ…å«Redisè¿æ¥å¤±è´¥çš„é”™è¯¯å¤„ç†"],"boundaries":{"allowed_files":["user_service/logic.py"],"disallowed_patterns":["database model changes"],"tech_stack_constraints":"Python 3.9+, Redis 6.x"},"dependencies":[],"acceptance_criteria":["å•å…ƒæµ‹è¯•éªŒè¯ç¼“å­˜å‘½ä¸­å’Œæœªå‘½ä¸­åœºæ™¯","å‹åŠ›æµ‹è¯•ä¸‹æ¥å£å“åº”æ—¶é—´ç¬¦åˆé¢„æœŸ"],"todo_list":["[ ] Implement caching logic","[ ] Add error handling","[ ] Write unit tests"]}
  è¿”å›è¦æ±‚: {"type":"object","properties":{"status":{"type":"string","enum":["success","failure","partial_success"]},"summary":{"type":"string"},"artifacts":{"type":"array","items":{"type":"object","properties":{"path":{"type":"string"},"description":{"type":"string"}},"required":["path"]}},"metrics":{"type":"object","properties":{"coverage":{"type":"number"}}}},"required":["status","summary","artifacts"],"additionalProperties":true}
  </message>
</new_task>
```

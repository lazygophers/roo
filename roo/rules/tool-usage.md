# å·¥å…·ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£ä¸º roo ç³»ç»Ÿæä¾›ç®€æ´å®ç”¨çš„å·¥å…·é€‰æ‹©å’Œåº”ç”¨æŒ‡å—ã€‚

---

## å·¥å…·å¿«é€Ÿå‚è€ƒ

### æ ¸å¿ƒå·¥å…·åˆ†ç±»

#### ğŸ” æ¢ç´¢ä¸åˆ†æ

- **[`list_files`](tool-usage.md:12)** - æµè§ˆé¡¹ç›®ç»“æ„ï¼Œæ”¯æŒé€’å½’
- **[`read_file`](tool-usage.md:13)** - è¯»å–æ–‡ä»¶å†…å®¹ï¼ˆæœ€å¤š 5 ä¸ªï¼‰
- **[`list_code_definition_names`](tool-usage.md:14)** - è·å–ä»£ç å®šä¹‰æ¦‚è§ˆ
- **[`search_files`](tool-usage.md:15)** - æ­£åˆ™æœç´¢æ–‡ä»¶å†…å®¹

#### âœï¸ æ–‡ä»¶ç¼–è¾‘

- **[`apply_diff`](tool-usage.md:18)** - ç²¾ç¡®ä¿®æ”¹ä»£ç æ®µï¼ˆä¼˜å…ˆä½¿ç”¨ï¼‰
- **[`insert_content`](tool-usage.md:19)** - åœ¨æŒ‡å®šè¡Œæ’å…¥å†…å®¹
- **[`search_and_replace`](tool-usage.md:20)** - æ‰¹é‡æŸ¥æ‰¾æ›¿æ¢
- **[`write_to_file`](tool-usage.md:21)** - åˆ›å»ºæ–°æ–‡ä»¶æˆ–å®Œå…¨é‡å†™

#### ğŸ¤ äº¤äº’å†³ç­–

- **[`ask_followup_question`](tool-usage.md:24)** - è¯·æ±‚ç”¨æˆ·å†³ç­–ï¼ˆæä¾›é€‰é¡¹ï¼‰
- **[`update_todo_list`](tool-usage.md:25)** - ç®¡ç†ä»»åŠ¡æ¸…å•
- **[`new_task`](tool-usage.md:26)** - å§”æ´¾ç»™ä¸“ä¸šæ¨¡å¼
- **[`sequentialthinking`](tool-usage.md:27)** - å¤æ‚é—®é¢˜åˆ†æï¼ˆMCPï¼‰

#### ğŸ› ï¸ ç³»ç»Ÿæ“ä½œ

- **[`execute_command`](tool-usage.md:30)** - æ‰§è¡Œå‘½ä»¤è¡Œæ“ä½œ
- **[`use_mcp_tool`](tool-usage.md:31)** - è°ƒç”¨ MCP æœåŠ¡å·¥å…·
- **[`attempt_completion`](tool-usage.md:32)** - å®Œæˆä»»åŠ¡äº¤ä»˜

### å·¥å…·é€‰æ‹©å†³ç­–æ ‘

```
ä»»åŠ¡å¼€å§‹
â”œâ”€ éœ€è¦äº†è§£é¡¹ç›®ï¼Ÿâ†’ list_files + read_file + list_code_definition_names
â”œâ”€ éœ€è¦ç”¨æˆ·å†³ç­–ï¼Ÿâ†’ ask_followup_questionï¼ˆL1çº§å†³ç­–ï¼‰
â”œâ”€ ä»»åŠ¡å¤æ‚åº¦é«˜ï¼Ÿâ†’ sequentialthinking â†’ ä»»åŠ¡åˆ†è§£
â”œâ”€ ä¿®æ”¹æ–‡ä»¶ï¼Ÿ
â”‚  â”œâ”€ æ–°å»º â†’ write_to_file
â”‚  â”œâ”€ ç²¾ç¡®ä¿®æ”¹ â†’ apply_diff
â”‚  â”œâ”€ æ’å…¥å†…å®¹ â†’ insert_content
â”‚  â””â”€ æ‰¹é‡æ›¿æ¢ â†’ search_and_replace
â”œâ”€ éœ€è¦ä¸“ä¸šèƒ½åŠ›ï¼Ÿâ†’ new_taskï¼ˆå§”æ´¾ä¸“ä¸šæ¨¡å¼ï¼‰
â””â”€ å®Œæˆä»»åŠ¡ â†’ update_todo_list + attempt_completion
```

---

## åœºæ™¯åŒ–å·¥å…·ç»„åˆ

### å¸¸ç”¨å·¥ä½œæµæ¨¡å¼

#### ğŸš€ é¡¹ç›®åˆå§‹åŒ–

```yaml
æµç¨‹: list_files â†’ read_file(é…ç½®æ–‡ä»¶) â†’ list_code_definition_names â†’ update_todo_list
ç”¨é€”: å¿«é€Ÿäº†è§£é¡¹ç›®ç»“æ„å’Œä¾èµ–
```

#### ğŸ› Bug ä¿®å¤

```yaml
æµç¨‹: read_file â†’ search_files(å½±å“èŒƒå›´) â†’ apply_diff â†’ execute_command(æµ‹è¯•)
ç”¨é€”: å®šä½é—®é¢˜ã€ä¿®å¤ä»£ç ã€éªŒè¯ç»“æœ
```

#### ğŸ—ï¸ åŠŸèƒ½å¼€å‘

```yaml
æµç¨‹: sequentialthinking(è®¾è®¡) â†’ write_to_file(æ–°æ–‡ä»¶) â†’ insert_content(æ·»åŠ åŠŸèƒ½) â†’ execute_command(æ„å»º)
ç”¨é€”: ä»è®¾è®¡åˆ°å®ç°çš„å®Œæ•´å¼€å‘æµç¨‹
```

#### â™»ï¸ ä»£ç é‡æ„

```yaml
æµç¨‹: list_code_definition_names â†’ search_files â†’ apply_diff(æ‰¹é‡) â†’ execute_command(æµ‹è¯•)
ç”¨é€”: ç³»ç»ŸåŒ–æ”¹è¿›ä»£ç ç»“æ„
```

#### ğŸ“ æ–‡æ¡£æ›´æ–°

```yaml
æµç¨‹: list_files â†’ new_task(doc-writer) â†’ write_to_file/apply_diff
ç”¨é€”: å§”æ´¾ç»™ä¸“ä¸šæ–‡æ¡£æ¨¡å¼å¤„ç†
```

### å·¥å…·ç»„åˆé€ŸæŸ¥

| ç›®æ ‡         | æ¨èç»„åˆ                                       | å…³é”®ç‚¹         |
| ------------ | ---------------------------------------------- | -------------- |
| **æ¢ç´¢ç†è§£** | `list_files` â†’ `read_file` â†’ `search_files`    | ä»æ•´ä½“åˆ°ç»†èŠ‚   |
| **ç²¾ç¡®ä¿®æ”¹** | `read_file` â†’ `apply_diff` â†’ `execute_command` | å…ˆè¯»åæ”¹å†éªŒè¯ |
| **æ‰¹é‡æ“ä½œ** | `search_files` â†’ `search_and_replace`          | å…ˆæœç´¢ç¡®è®¤èŒƒå›´ |
| **åˆ›å»ºåŠŸèƒ½** | `write_to_file` â†’ `insert_content`             | å…ˆæ¡†æ¶åç»†èŠ‚   |
| **å¤æ‚å†³ç­–** | `sequentialthinking` â†’ `ask_followup_question` | åˆ†æåç¡®è®¤     |

---

## MCP æœåŠ¡ä½¿ç”¨

### æ ¸å¿ƒ MCP æœåŠ¡

#### Sequential Thinking
**ç”¨é€”**ï¼šå¤æ‚é—®é¢˜çš„é€æ­¥åˆ†æå’Œæ·±åº¦æ€è€ƒ
**åœºæ™¯**ï¼šéœ€æ±‚åˆ†æã€æ–¹æ¡ˆè®¾è®¡ã€é—®é¢˜æ’æŸ¥ã€ä»»åŠ¡åˆ†è§£
**è§¦å‘æ¡ä»¶**ï¼š
- ä»»åŠ¡å¤æ‚åº¦è¯„åˆ† â‰¥ 60
- æ¶‰åŠå¤šç³»ç»Ÿé›†æˆ
- é—®é¢˜åŸå› ä¸æ˜ç¡®
- å­˜åœ¨å¤šç§å®ç°è·¯å¾„

```xml
<use_mcp_tool>
  <server_name>sequentialthinking</server_name>
  <tool_name>sequentialthinking</tool_name>
  <arguments>{
    "thought": "ç¬¬ä¸€æ­¥ï¼šåˆ†æéœ€æ±‚ï¼Œæ˜ç¡®æ ¸å¿ƒç›®æ ‡...",
    "nextThoughtNeeded": true,
    "thoughtNumber": 1,
    "totalThoughts": 5
  }</arguments>
</use_mcp_tool>
```

#### Context7
**ç”¨é€”**ï¼šæŸ¥è¯¢æœ€æ–°æŠ€æœ¯æ–‡æ¡£ã€API å‚è€ƒã€ä»£ç ç¤ºä¾‹
**åœºæ™¯**ï¼šæŠ€æœ¯è°ƒç ”ã€æœ€ä½³å®è·µè·å–ã€æ–°æŠ€æœ¯å­¦ä¹ 
**ä½¿ç”¨æ­¥éª¤**ï¼š
1. å…ˆè°ƒç”¨ `resolve-library-id` è·å–åº“ ID
2. å†è°ƒç”¨ `get-library-docs` è·å–æ–‡æ¡£

```xml
<use_mcp_tool>
  <server_name>context7</server_name>
  <tool_name>get-library-docs</tool_name>
  <arguments>{
    "context7CompatibleLibraryID": "/facebook/react",
    "topic": "hooks",
    "tokens": 10000
  }</arguments>
</use_mcp_tool>
```

#### GitHub
**ç”¨é€”**ï¼šä»£ç ä»“åº“ç®¡ç†ã€PR æ“ä½œã€Issue ç®¡ç†
**å¸¸ç”¨æ“ä½œ**ï¼š
- `get_file_contents` - è·å–ä»“åº“æ–‡ä»¶å†…å®¹
- `create_pull_request` - åˆ›å»º PR
- `search_code` - æœç´¢ä»£ç 
- `list_issues` - åˆ—å‡º Issue

### MCP æœåŠ¡å†³ç­–çŸ©é˜µ

| æœåŠ¡ | ä¸»è¦åœºæ™¯ | å†³ç­–çº§åˆ« | ä¼˜å…ˆçº§ |
|------|----------|----------|--------|
| **sequentialthinking** | ä»»åŠ¡åˆ†è§£ã€æ–¹æ¡ˆè®¾è®¡ | L1 | æœ€é«˜ |
| **context7** | å¤–éƒ¨æ–‡æ¡£æŸ¥è¯¢ | L3 | é«˜ |
| **github** | ä»“åº“æ“ä½œ | L2 | é«˜ |

---

## æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **åˆ†å±‚å†³ç­–**ï¼šL1 çº§å†³ç­–å¿…é¡»è¯·æ±‚ç”¨æˆ·ç¡®è®¤
2. **æ‰¹é‡ä¼˜åŒ–**ï¼šåˆå¹¶å¤šä¸ªä¿®æ”¹åˆ°å•ä¸ª `apply_diff`
3. **éªŒè¯å…ˆè¡Œ**ï¼šä¿®æ”¹å‰ç”¨ `list_files` ç¡®è®¤æ–‡ä»¶å­˜åœ¨
4. **åŠæ—¶æ›´æ–°**ï¼šæ¯ä¸ªå…³é”®èŠ‚ç‚¹æ›´æ–° `todo_list`
5. **å·¥å…·ä¼˜å…ˆçº§**ï¼š
   - æ–‡ä»¶ä¿®æ”¹ï¼š`apply_diff` > `search_and_replace` > `write_to_file`
   - æ–‡ä»¶æ¢ç´¢ï¼šå†…å»ºå·¥å…· > `execute_command`

### âŒ é¿å…åæ¨¡å¼

#### å¸¸è§åæ¨¡å¼é€ŸæŸ¥

| åæ¨¡å¼ | é—®é¢˜ | æ­£ç¡®åšæ³• |
|--------|------|----------|
| **ç”¨ `write_to_file` åšå°ä¿®æ”¹** | æ•ˆç‡ä½ã€é£é™©é«˜ã€æ„å›¾æ¨¡ç³Š | ä½¿ç”¨ `apply_diff` ç²¾ç¡®ä¿®æ”¹ |
| **ç”¨ `execute_command` æ‰§è¡Œæ–‡ä»¶æ“ä½œ** | å¹³å°ä¾èµ–ã€è§£æå›°éš¾ | ä½¿ç”¨å†…å»ºå·¥å…·ï¼ˆ`list_files`/`read_file`ï¼‰ |
| **æ— è§„åˆ’è¿ç»­è°ƒç”¨å·¥å…·** | é€»è¾‘æ··ä¹±ã€æ•ˆç‡ä½ä¸‹ | å…ˆç”¨ `sequentialthinking` è§„åˆ’ |
| **å¼€æ”¾å¼ `ask_followup_question`** | è´Ÿæ‹…è½¬ç§»ç»™ç”¨æˆ· | æä¾›å…·ä½“é€‰é¡¹ä¾›é€‰æ‹© |

#### åæ¨¡å¼è¯¦è§£

**1. æ–‡ä»¶ä¿®æ”¹åæ¨¡å¼**
- âŒ è¯»å–æ•´ä¸ªæ–‡ä»¶ â†’ å†…å­˜ä¿®æ”¹ â†’ `write_to_file` è¦†ç›–
- âœ… ä½¿ç”¨ `apply_diff` è¿›è¡Œå¤–ç§‘æ‰‹æœ¯å¼ç²¾ç¡®ä¿®æ”¹
- âœ… ä½¿ç”¨ `search_and_replace` è¿›è¡Œæ‰¹é‡æ›¿æ¢
- âœ… ä½¿ç”¨ `insert_content` æ·»åŠ æ–°å†…å®¹

**2. æ–‡ä»¶ç³»ç»Ÿæ“ä½œåæ¨¡å¼**
- âŒ `execute_command` æ‰§è¡Œ `ls`ã€`cat`ã€`mkdir`
- âœ… `list_files` åˆ—å‡ºæ–‡ä»¶ï¼ˆæ”¯æŒé€’å½’å’Œç»“æ„åŒ–ï¼‰
- âœ… `read_file` è¯»å–æ–‡ä»¶å†…å®¹
- âœ… `write_to_file` è‡ªåŠ¨åˆ›å»ºæ‰€éœ€ç›®å½•

**3. å·¥å…·è°ƒç”¨åæ¨¡å¼**
- âŒ æ— ç›®çš„åå¤ `read_file` ä¸åŒæ–‡ä»¶
- âœ… å¤æ‚ä»»åŠ¡å…ˆç”¨ `sequentialthinking` åˆ†æ
- âœ… ä½¿ç”¨ `ask_followup_question` ç¡®è®¤æ–¹æ¡ˆ
- âœ… éµå¾ªå·¥å…·ç»„åˆæ¨¡å¼ç»„ç»‡æ“ä½œ

**4. å†³ç­–é€ƒé¿åæ¨¡å¼**
- âŒ æå‡ºå¼€æ”¾é—®é¢˜ï¼š"æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Ÿ"
- âœ… åˆ†æå¯èƒ½æ–¹æ¡ˆï¼Œé€šè¿‡ `suggest` æä¾›é€‰é¡¹
- âœ… ä¸»åŠ¨ç”¨ `list_files`/`search_files` æ¢ç´¢
- âœ… å°†æ‰¾åˆ°çš„é€‰é¡¹æä¾›ç»™ç”¨æˆ·ç¡®è®¤

### å¼‚å¸¸å¤„ç†æŒ‡å—

#### å¼‚å¸¸å¤„ç†é€ŸæŸ¥è¡¨

| å¼‚å¸¸ç±»å‹ | æ¨èå·¥å…· | å¤„ç†ç­–ç•¥ |
|----------|----------|----------|
| **æ–‡ä»¶ä¸å­˜åœ¨** | `list_files` â†’ `ask_followup_question` | ç¡®è®¤è·¯å¾„æˆ–åˆ›å»ºæ–‡ä»¶ |
| **æƒé™ä¸è¶³** | `ask_followup_question` | è¯·æ±‚æƒé™æˆ–åˆ‡æ¢æ–¹æ¡ˆ |
| **å·¥å…·å¤±è´¥** | `execute_command` â†’ `read_file` | æŸ¥çœ‹é”™è¯¯æ—¥å¿—å¹¶é‡è¯• |
| **ä¿¡æ¯ä¸è¶³** | `ask_followup_question` | æ”¶é›†å¿…è¦å‚æ•° |
| **å¤æ‚åº¦è¿‡é«˜** | `sequentialthinking` â†’ `new_task` | åˆ†è§£ä»»åŠ¡æˆ–å§”æ´¾ |
| **ä¾èµ–ç¼ºå¤±** | `execute_command` â†’ `ask_followup_question` | å®‰è£…ä¾èµ–æˆ–è°ƒæ•´æ–¹æ¡ˆ |
| **é…ç½®é”™è¯¯** | `read_file` â†’ `apply_diff` | ä¿®æ­£é…ç½®æ–‡ä»¶ |
| **ç½‘ç»œé—®é¢˜** | `execute_command` â†’ `ask_followup_question` | é‡è¯•æˆ–ç¦»çº¿æ–¹æ¡ˆ |

#### å¼‚å¸¸å¤„ç†å·¥ä½œæµ

**æ­¥éª¤ 1: è¯†åˆ«å¼‚å¸¸**
```yaml
è§¦å‘: å·¥å…·æ‰§è¡Œå¤±è´¥æˆ–è¿”å›é”™è¯¯
æ“ä½œ: åˆ†æé”™è¯¯ç±»å‹å’ŒåŸå› 
```

**æ­¥éª¤ 2: é€‰æ‹©å¤„ç†ç­–ç•¥**
```yaml
å†³ç­–æ ‘:
  - å¯è‡ªåŠ¨ä¿®å¤ â†’ æ‰§è¡Œä¿®å¤å·¥å…·
  - éœ€è¦ä¿¡æ¯ â†’ ask_followup_question
  - è¶…å‡ºèƒ½åŠ› â†’ new_task å§”æ´¾
```

**æ­¥éª¤ 3: æ‰§è¡Œæ¢å¤**
```yaml
æ‰§è¡Œ: æ ¹æ®ç­–ç•¥ä½¿ç”¨ç›¸åº”å·¥å…·
éªŒè¯: execute_command ç¡®è®¤æ¢å¤æˆåŠŸ
è®°å½•: update_todo_list æ›´æ–°çŠ¶æ€
```

### æ€§èƒ½ä¼˜åŒ–æŠ€å·§

#### æ‰¹é‡æ“ä½œä¼˜åŒ–
- å•ä¸ª `apply_diff` å¤„ç†å¤šä¸ªä¿®æ”¹ï¼ˆä½¿ç”¨å¤šä¸ª SEARCH/REPLACE å—ï¼‰
- åˆå¹¶å¤šä¸ª `read_file` è¯·æ±‚ï¼ˆæœ€å¤š 5 ä¸ªæ–‡ä»¶ï¼‰
- ä½¿ç”¨ `search_and_replace` æ›¿ä»£å¤šæ¬¡ `apply_diff`

#### å†³ç­–ä¼˜åŒ–
- å‰ç½®é‡è¦å†³ç­–ï¼Œé¿å…è¿”å·¥
- æ‰¹é‡æ”¶é›†ä¿¡æ¯åç»Ÿä¸€å†³ç­–
- ä½¿ç”¨å†³ç­–çŸ©é˜µå‡å°‘å†³ç­–æ¬¡æ•°

#### å·¥å…·é“¾ä¼˜åŒ–
- ä¼˜å…ˆä½¿ç”¨å†…å»ºå·¥å…·è€Œé `execute_command`
- å¤ç”¨å·¥å…·ç»„åˆæ¨¡å¼
- é¿å…é‡å¤è¯»å–æœªä¿®æ”¹çš„æ–‡ä»¶
